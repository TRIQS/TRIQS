#!@PYTHON_INTERPRETER@

cxxflags = "@CMAKE_CXX_FLAGS@ @TRIQS_CXX_FLAGS@ @PYTHON_CXX_FLAGS@"
ldflags = "@TRIQS_LD_FLAGS@ @PYTHON_LD_FLAGS@ -ltriqs -lcpp2py"

import argparse, os
parser = argparse.ArgumentParser(description="""
A compiler-wrapper for the triqs library
""")
parser.add_argument('-show', action='store_true', help="Output the compiler and linktime flags")
args, additional_args = parser.parse_known_args()

if args.show: 
    print "CXXFLAGS=\"%s\""%(cxxflags)
    print "LDFLAGS=\"%s\""%(ldflags)
else:
    compile_command = "@CMAKE_CXX_COMPILER@ -Wno-unused-command-line-argument %s %s %s"%(cxxflags, " ".join(additional_args), ldflags)
    os.system(compile_command)
